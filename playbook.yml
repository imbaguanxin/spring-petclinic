---
- name: Deploy PetClinic Artifact
  hosts: webserver
  remote_user: vagrant
  become: true

  # vars:
  #   artifact_name: "spring-petclinic-3.1.0-SNAPSHOT.jar"
  #   artifact_source: "/var/lib/jenkins/workspace/petclinic/target/spring-petclinic-3.1.0-SNAPSHOT.jar"
  #   deploy_directory: "/home/vagrant/"

  tasks:
    - name: Copy random file
      become: true
      copy:
        src: "readme.md"
        dest: "/home/vagrant/readme.md"
        owner: vagrant
        group: vagrant
        mode: 0644

    - name: Copy artifact
      become: true
      copy:
        src: "/var/lib/jenkins/workspace/petclinic/target/spring-petclinic-3.1.0-SNAPSHOT.jar"
        dest: "/home/vagrant/spring-petclinic-3.1.0-SNAPSHOT.jar"
        owner: vagrant
        group: vagrant
        mode: 0644